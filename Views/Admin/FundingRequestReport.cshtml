@using System.Globalization

@model List<BumbleBeeFoundation_Client.Models.FundingRequestReportItem>

@{
    ViewBag.Title = "Funding Request Report";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var southAfricanCulture = new CultureInfo("af-ZA");
}
<link href="~/css/bumblebee-theme.css" rel="stylesheet" />

<h1 class="text-center funding-request-report-title">Funding Request Report</h1>
<p><a asp-action="Dashboard" asp-controller="Admin" class="btn btn-primary">Back To Dashboard</a></p>

@if (Model == null || !Model.Any())
{
    <div class="alert alert-warning">
        <strong>No funding requests available to display.</strong>
    </div>
}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>Request ID</th>
                <th>Company Name</th>
                <th>Project Description</th>
                <th>Requested Amount (ZAR)</th>
                <th>Status</th>
                <th>Submitted At</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var request in Model)
            {
                <tr>
                    <td>@request.RequestID</td>
                    <td>@request.CompanyName</td>
                    <td>@request.ProjectDescription</td>
                    <td>@request.RequestedAmount.ToString("C", southAfricanCulture)</td>
                    <td>@request.Status</td>
                    <td>@request.SubmittedAt.ToString("yyyy-MM-dd HH:mm")</td>
                </tr>
            }
        </tbody>
    </table>

    <div>
        <h3>Summary</h3>
        <p>Total Requests: @Model.Count</p>
        <p>Total Requested Amount: @Model.Sum(r => r.RequestedAmount).ToString("C", southAfricanCulture)</p>
        <p>Pending Requests: @Model.Count(r => r.Status == "Pending")</p>
        <p>Approved Requests: @Model.Count(r => r.Status == "Approved")</p>
        <p>Rejected Requests: @Model.Count(r => r.Status == "Rejected")</p>
    </div>
}
